<!-- Editor -->
<div class="editor">
    <textarea id="codeEditor"></textarea>
    <br>
    <button id="runButton">Run Code</button>
    <h2>Output:</h2>
    <pre id="output"></pre> 
</div>

<!-- โหลด Pyodide -->
<script src="https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.js"></script>

<script>
    document.addEventListener("DOMContentLoaded", async function () {
        console.log("Loading Pyodide...");
        window.pyodide = await loadPyodide();
        console.log("Pyodide Loaded");

        document.getElementById("runButton").addEventListener("click", async function () {
            const code = document.getElementById("codeEditor").value;
            console.log("Running Python code:", code);
            try {
                const output = await pyodide.runPythonAsync(`
                    import sys
                    from io import StringIO
                    sys.stdout = StringIO()
                    ${code}
                    sys.stdout.getvalue()
                `);
                console.log("Python Output:", output);
                document.getElementById("output").textContent = output;
            } catch (err) {
                console.error("Error:", err);
                document.getElementById("output").textContent = "Error: " + err.message;
            }
        });
    });
</script>
