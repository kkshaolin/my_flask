<div id="editor">
    <h1>Python Online Editor</h1>
    <textarea id="codeEditor">print("สวัสดี ชาวโลก!")</textarea>
    <br>
    <button id="runButton">Run Code</button>
    <h2>Output:</h2>
    <pre id="output"></pre> 
</div>

<script>
    async function main() {
            console.log("Loading Pyodide...");
            window.pyodide = await loadPyodide();
            console.log("Pyodide Loaded");
        }

        async function runPython() {
            const code = document.getElementById("codeEditor").value;
            console.log("Running Python code:", code);

            try {
                const output = await pyodide.runPythonAsync(`
                    import sys
                    from io import StringIO
                    sys.stdout = StringIO()
                    ${code}
                    sys.stdout.getvalue()
                `);
                console.log("Python Output:", output);
                document.getElementById("output").textContent = output;
            } catch (err) {
                console.error("Error:", err);
                document.getElementById("output").textContent = "Error: " + err.message;
            }
        }

        document.getElementById("runButton").addEventListener("click", runPython);

        main();
</script>